<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
    <meta charset="utf-8">
    <title>Ordina JWorks Tech Blog</title>
    <!-- Description, Keywords and Author -->
    <meta name="description" content="Ordina JWorks Tech blog
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,Javascript,DevOps">
    <meta name="author" content="Ordina Belgium">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    
    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/conference/2016/05/24/SpringIO16-Spring-Rest-Docs.html" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Spring I/O 16: Test-driven documentation with Spring REST Docs -  " />
    <meta property="og:description" content="Ordina JWorks Tech Blog" />
    <meta property="og:image" content="http://ordina-jworks.github.io/img/springio.jpg" />
    

    <!-- Styles -->
    <!-- Bootstrap CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Base style -->
    <link href="/css/styles/style.css" rel="stylesheet">
    <!-- Skin CSS -->
    <link href="/css/styles/skin-orange.css" rel="stylesheet" id="color_theme">

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<!-- Add class "boxed" along with body for boxed layout. -->
<!-- Add "pattern-x" (1 to 5) for background patterns. -->
<!-- Add "img-x" (1 to 5) for background images. -->
<body>

<!-- Outer Starts -->
<div class="outer">
    <!-- Header two Starts -->
    <div class="header-2">

        <!-- Container -->
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="logo">
                        <h1><a href="/"><img src="/img/jworks/jworks-400x400.jpg"
                                                               width="100"
                                                               height="100"/> </a></h1>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="navy">
                        <ul>
                            <li><a href="/">Home</a></li>
                            <li><a href="/about/">About Us</a></li>
                            <li><a href="/contact">Contact Us</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Header two ends -->

    <!-- Main content starts -->

    <div class="main-block">

        <!-- Page heading two starts -->

        <div class="page-heading-two">
            <div class="container">
                <h2>JWorks Tech Blogs<span style="margin-left: 10px"> Powered by Ordina</span></h2>

                <div class="clearfix"></div>
            </div>
        </div>

        <!-- Page heading two ends -->

        <div class="container tk-acumin-pro">
            <div class="post">
    <div class="row">
        <div class="col-md-12">
            <h1>Spring I/O 16: Test-driven documentation with Spring REST Docs</h1>
            <p id="post-meta">
                Posted May 24, 2016 in <a href="/categories/conference/">conference</a>
                
                    by 
                    
                
                        
                        <a href="/author/kevin-van-houtte/">Kevin Van Houtte</a>
                    
                
                
                    <br />
                    <i class="fa fa-tags"></i>
                        
                            <a href="/tags/spring-io/">Spring IO</a>,
                        
                            <a href="/tags/spring/">Spring</a>,
                        
                            <a href="/tags/conference/">Conference</a>
                        
                
            </p>
        </div>
    </div>
    <br />
    <article class="post-content">
        <h2 id="spring-io-2016">Spring IO 2016</h2>
<p>The main focus this year was definitely about cloud, reactive and microservices.
But it is important not to forget other topics, like documentation! 
Keep calm, you don’t have to do it manually! 
Spring made it easy for us with Spring REST Docs! 
This year at Spring IO, Andy Wilkinson himself talked about why, how and when Spring REST Docs are being used. 
Last but not least, he talked about the new features that came out in version 1.1.
Since I implemented Spring REST Docs in a project, I’ll use examples from my experiences.</p>

<p><img class="p-image float-image" width="200" alt="Andy Wilkinson" src="/img/rest-docs/andywilkinson.jpg" /></p>

<h3 id="andy-wilkinson">Andy Wilkinson</h3>

<p>Andy is a Spring Boot, REST docs committer and Spring IO platform lead at Pivotal. 
You can find him on Twitter using the handle <a href="https://twitter.com/ankinson">@ankinson</a>.</p>

<blockquote class="clear"><p>
Writing documentation is critical in the world of development. 
It is used to make an accurate and straight declaration and intent of what the service has to offer. 
Frontend developers will be able to know which endpoints they have to call and receive the right data. 
Now, we all know it's tedious for developers to write documentation...
It's your lucky day! Spring REST Docs will make your life easier.
While you are writing tests, Spring will generate a fully HTML api guide for you and your team. 
This blog post will take you through the best practices, how to and new features in 1.1.
</p></blockquote>

<p><strong>Why Test driven approach</strong></p>

<ul>
  <li>It’s an accurate definition of your application (no side effects)</li>
  <li>It describes the specific HTTP request and response</li>
  <li>It’s straight forward without repetition</li>
  <li>It’s easier to write (no annotations like Swagger)</li>
</ul>

<h3 id="markup-languages">Markup languages</h3>

<h4 id="asciidoctor">Asciidoctor</h4>
<p>Asciidoctor is a markup language that processes plain text and produces HTML, completely styled to suit your needs.
If you are interested in writing in Asciidoctor be sure to check out the <a href="http://asciidoctor.org/docs/user-manual/#introduction-to-asciidoctor">manual</a>.</p>

<h4 id="markdown-new-in-11">Markdown (New in 1.1)</h4>
<p>With the newest version of REST Docs, the developer now has more options in terms of markup languages.
The Markdown support is not as feature-rich as Asciidoctor, but Markdown can work very well when combined with existing documentation toolchains such as <a href="https://github.com/tripit/slate">Slate</a>.
Here is a good <a href="https://github.com/spring-projects/spring-restdocs/tree/master/samples/rest-notes-slate">sample</a> working with slate.</p>

<h4 id="andys-pick">Andy’s pick</h4>
<p>Asciidoctor!
Since Asciidoctor boasts more features than Markdown, it gives Asciidoctor the edge.</p>

<h3 id="test-tools">Test Tools</h3>
<p>When we want to use Spring REST Docs, we’ll have to use one of the test tools. 
Here are the different tools of choice. To use these tools we’ll have to initialise which document, <code class="highlighter-rouge">Mockmvc</code> and <code class="highlighter-rouge">ObjectWriter</code> we’ll be using.</p>

<h4 id="mockmvc">MockMvc</h4>
<p>A lightweight server-less documentation generation by the Spring Framework that has been the default use in Spring REST Docs.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

<span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="n">WebApplicationContext</span> <span class="n">context</span><span class="o">;</span>

 <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">document</span> <span class="o">=</span> <span class="n">document</span><span class="o">(</span><span class="s">"{method-name}"</span><span class="o">);</span>
        <span class="n">mockMvc</span> <span class="o">=</span> <span class="n">MockMvcBuilders</span><span class="o">.</span><span class="na">webAppContextSetup</span><span class="o">(</span><span class="n">wac</span><span class="o">)</span>
                <span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">documentationConfiguration</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">restDocumentation</span><span class="o">).</span><span class="na">uris</span><span class="o">().</span><span class="na">withScheme</span><span class="o">(</span><span class="s">"https"</span><span class="o">)).</span><span class="na">alwaysDo</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">)</span>
                <span class="o">.</span><span class="na">addFilter</span><span class="o">(</span><span class="k">new</span> <span class="n">JwtFilter</span><span class="o">(),</span><span class="s">"/*"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="n">objectWriter</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">writer</span><span class="o">();</span>

        <span class="n">authToken</span> <span class="o">=</span> <span class="n">TestUtil</span><span class="o">.</span><span class="na">getAuthToken</span><span class="o">();</span>
        <span class="n">TestUtil</span><span class="o">.</span><span class="na">setAuthorities</span><span class="o">();</span>
    <span class="o">}</span></code></pre></figure>

<h4 id="restassured-new-11">RestAssured (New 1.1)</h4>
<p>As an alternative, you can use RestAssured to test and document your RESTful services. 
Available in V1.1, RestAssured will be more expandable than MockMvc.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">RequestSpecification</span> <span class="n">spec</span><span class="o">;</span>

<span class="nd">@Before</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">spec</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RequestSpecBuilder</span><span class="o">().</span><span class="na">addFilter</span><span class="o">(</span>
            <span class="n">documentationConfiguration</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">restDocumentation</span><span class="o">))</span> 
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<h4 id="andys-pick-1">Andy’s pick</h4>
<p>This time he didn’t favor one but he mentioned that RestAssured gives you more functionality and extends your possibilities with HTTP.</p>

<h3 id="snip-snip-snippets-everywhere">Snip, snip, snippets everywhere!</h3>

<h4 id="default-snippet">Default Snippet</h4>
<p>Snippets are generated by the documented test method.
Once you run the test method, you can add these snippets in your Markdown/Asciidoctor file. 
Be aware, these type of snippet will fail if you don’t have the correct response/request syntax.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">.</span><span class="na">snippets</span><span class="o">(</span>
                <span class="n">links</span><span class="o">(</span>
                        <span class="n">halLinks</span><span class="o">(),</span> <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"self"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's resource"</span><span class="o">),</span>
                        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"employee"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's projection"</span><span class="o">)),</span>
                        <span class="n">responseFields</span><span class="o">(</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"username"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee unique database identifier"</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"firstName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's first name"</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"lastName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's last name"</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"linkedin"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's linkedin"</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"unit"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's unit"</span><span class="o">).</span><span class="na">type</span><span class="o">(</span><span class="n">Unit</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"_links"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"links to other resources"</span><span class="o">)</span>
                        <span class="o">));</span>
 <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span>
                <span class="n">get</span><span class="o">(</span><span class="s">"/employees/1"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">));</span></code></pre></figure>

<h4 id="relaxed-snippet-new-in-11">Relaxed Snippet (New in 1.1)</h4>
<p>In contrast to default snippets, relaxed snippets don’t complain when something was neglected in the document.
This is an advantage when you only need to focus on a certain scenario or specific part of the response/request.</p>

<h4 id="reusable-snippet-new-in-11">Reusable Snippet (New in 1.1)</h4>
<p>With the newly introduced reusable snippet, you can define a snippet at the beginning of your test class and reuse it every time you need it. 
When added to your test method, you can extend it with extra variables.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// First we define a snippet for reuse</span>
<span class="kd">protected</span> <span class="kd">final</span> <span class="n">LinksSnippet</span> <span class="n">pagingLinks</span> <span class="o">=</span> <span class="n">links</span><span class="o">(</span>
        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"first"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The first page of results"</span><span class="o">),</span>
        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"last"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The last page of results"</span><span class="o">),</span>
        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"next"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The next page of results"</span><span class="o">),</span>
        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"prev"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The previous page of results"</span><span class="o">));</span>

<span class="c1">// Then you perform the mockMvc and add the snippet to the document.</span>
<span class="c1">// As you can see, it is expendable.</span>
<span class="k">this</span><span class="o">.</span><span class="na">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">))</span>
    <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
    <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"example"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">pagingLinks</span><span class="o">.</span><span class="na">and</span><span class="o">(</span> 
            <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"alpha"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"Link to the alpha resource"</span><span class="o">),</span>
            <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"bravo"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"Link to the bravo resource"</span><span class="o">))));</span></code></pre></figure>

<h2 id="type-of-snippets">Type of Snippets:</h2>
<p>A snippet can be one of the following:</p>

<h3 id="hypermedia-links">Hypermedia links</h3>
<p>When documenting your hypermedia application, you’ll have to define your links and where they go to. 
If you have dynamic links that can disappear at one time, you can use relaxed snippets or optional so it won’t complain.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> <span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">.</span><span class="na">snippets</span><span class="o">(</span>
                <span class="n">links</span><span class="o">(</span>
                        <span class="n">halLinks</span><span class="o">(),</span> <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"self"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's resource"</span><span class="o">),</span>
                        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"employee"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's projection"</span><span class="o">)),</span>
                <span class="n">responseFields</span><span class="o">(</span>
                        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"username"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee unique database identifier"</span><span class="o">).</span><span class="na">type</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
                        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"_links"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"links to other resources"</span><span class="o">)</span>
                <span class="o">));</span></code></pre></figure>

<h3 id="request-fields">Request fields</h3>
<p>This defines the fields you request from the client.
Normally Spring REST Docs will complain when you neglect a field but with v1.1 we now have support for Relaxed Snippets.
Because I use constraints, I made my own method `withPath, this will add an extra column constraint to the documentation.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
 <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ConstrainedFields</span> <span class="o">{</span>
         <span class="kd">private</span> <span class="kd">final</span> <span class="n">ConstraintDescriptions</span> <span class="n">constraintDescriptions</span><span class="o">;</span>
         <span class="n">ConstrainedFields</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">this</span><span class="o">.</span><span class="na">constraintDescriptions</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConstraintDescriptions</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
         <span class="o">}</span>
         <span class="kd">private</span> <span class="n">FieldDescriptor</span> <span class="nf">withPath</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">return</span> <span class="nf">fieldWithPath</span><span class="o">(</span><span class="n">path</span><span class="o">).</span><span class="na">attributes</span><span class="o">(</span><span class="n">key</span><span class="o">(</span><span class="s">"constraints"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="n">StringUtils</span>
                     <span class="o">.</span><span class="na">collectionToDelimitedString</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">constraintDescriptions</span>
                             <span class="o">.</span><span class="na">descriptionsForProperty</span><span class="o">(</span><span class="n">path</span><span class="o">),</span> <span class="s">". "</span><span class="o">)));</span>
         <span class="o">}</span>
     <span class="o">}</span>

 <span class="nd">@Test</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">postEmployee</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">{</span>
         <span class="n">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">employeeRepository</span><span class="o">.</span><span class="na">findByUsernameIgnoreCase</span><span class="o">(</span><span class="s">"Nivek"</span><span class="o">);</span>
         <span class="n">employee</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
         <span class="n">employee</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"Keloggs"</span><span class="o">);</span>
         <span class="n">String</span> <span class="n">string</span> <span class="o">=</span> <span class="n">objectWriter</span><span class="o">.</span><span class="na">writeValueAsString</span><span class="o">(</span><span class="n">employee</span><span class="o">);</span>
 
         <span class="n">ConstrainedFields</span> <span class="n">fields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConstrainedFields</span><span class="o">(</span><span class="n">Employee</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 
         <span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">.</span><span class="na">snippets</span><span class="o">(</span>
                 <span class="n">requestFields</span><span class="o">(</span>
                         <span class="n">fields</span><span class="o">.</span><span class="na">withPath</span><span class="o">(</span><span class="s">"username"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee unique database identifier"</span><span class="o">),</span>
                         <span class="n">fields</span><span class="o">.</span><span class="na">withPath</span><span class="o">(</span><span class="s">"firstName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's first name"</span><span class="o">),</span>
                         <span class="n">fields</span><span class="o">.</span><span class="na">withPath</span><span class="o">(</span><span class="s">"lastName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's last name"</span><span class="o">),</span>
                         <span class="o">));</span>
 
         <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="s">"/employees"</span><span class="o">).</span><span class="na">content</span><span class="o">(</span><span class="n">string</span><span class="o">).</span><span class="na">contentType</span><span class="o">(</span><span class="n">MediaTypes</span><span class="o">.</span><span class="na">HAL_JSON</span><span class="o">).</span><span class="na">header</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="n">authToken</span><span class="o">)).</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isCreated</span><span class="o">()).</span><span class="na">andReturn</span><span class="o">().</span><span class="na">getResponse</span><span class="o">().</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"Location"</span><span class="o">);</span>
     <span class="o">}</span>
                        
      </code></pre></figure>

<h3 id="response-fields">Response fields</h3>
<p>This defines the result after consultation of a resource.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">.</span><span class="na">snippets</span><span class="o">(</span>
              <span class="n">responseFields</span><span class="o">(</span>
                       <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"username"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee unique database identifier"</span><span class="o">),</span>
                       <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"firstName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's first name"</span><span class="o">),</span>
                       <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"lastName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's last name"</span><span class="o">),</span>
                           <span class="o">));</span></code></pre></figure>

<h3 id="requestresponse-headers">Request/response headers</h3>
<p>Defines your request/response headers in your API. 
This is useful when there are extra headers to set. 
When the request has to involve an authorization header for security reasons, you can add this header to your document.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span>
                <span class="n">get</span><span class="o">(</span><span class="s">"/employees/1"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
                <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="n">authToken</span><span class="o">)</span>
                <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"headers"</span><span class="o">,</span>
                				<span class="n">requestHeaders</span><span class="o">(</span> 
                						<span class="n">headerWithName</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span>
                								<span class="s">"Basic auth credentials"</span><span class="o">)),</span> 
                				<span class="n">responseHeaders</span><span class="o">(</span> 
                						<span class="n">headerWithName</span><span class="o">(</span><span class="s">"X-RateLimit-Limit"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span>
                								<span class="s">"The total number of requests permitted per period"</span><span class="o">),</span>
                						<span class="n">headerWithName</span><span class="o">(</span><span class="s">"X-RateLimit-Remaining"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span>
                								<span class="s">"Remaining requests permitted in current period"</span><span class="o">),</span>
                						<span class="n">headerWithName</span><span class="o">(</span><span class="s">"X-RateLimit-Reset"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span>
                								<span class="s">"Time at which the rate limit period will reset"</span><span class="o">)))));</span></code></pre></figure>

<h3 id="request-parameters">Request parameters</h3>
<p>The parameters passed by in the uri as a query string are documented with the requestParameters.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">this</span><span class="o">.</span><span class="na">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/users?page=2&amp;per_page=100"</span><span class="o">))</span> 
	<span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
	<span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"users"</span><span class="o">,</span> <span class="n">requestParameters</span><span class="o">(</span> 
			<span class="n">parameterWithName</span><span class="o">(</span><span class="s">"page"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The page to retrieve"</span><span class="o">),</span> 
			<span class="n">parameterWithName</span><span class="o">(</span><span class="s">"per_page"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"Entries per page"</span><span class="o">)</span> 
	<span class="o">)));</span>
	
	</code></pre></figure>

<h3 id="request-parts-new-in-11">Request parts (new in 1.1)</h3>
<p>The parts of a multipart request can be documenting using <code class="highlighter-rouge">requestParts</code></p>

<p>Example</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">RestAssured</span><span class="o">.</span><span class="na">given</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">spec</span><span class="o">)</span>
	<span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"users"</span><span class="o">,</span> <span class="n">requestParts</span><span class="o">(</span> 
			<span class="n">partWithName</span><span class="o">(</span><span class="s">"file"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The file to upload"</span><span class="o">))))</span> 
	<span class="o">.</span><span class="na">multiPart</span><span class="o">(</span><span class="s">"file"</span><span class="o">,</span> <span class="s">"example"</span><span class="o">)</span> 
	<span class="o">.</span><span class="na">when</span><span class="o">().</span><span class="na">post</span><span class="o">(</span><span class="s">"/upload"</span><span class="o">)</span> 
	<span class="o">.</span><span class="na">then</span><span class="o">().</span><span class="na">statusCode</span><span class="o">(</span><span class="n">is</span><span class="o">(</span><span class="mi">200</span><span class="o">));</span></code></pre></figure>

<h2 id="what-makes-good-documentation">What makes good documentation?</h2>

<h3 id="andys-pick-2">Andy’s pick</h3>
<p>He told us that the <a href="https://developer.github.com/v3/">GitHub API</a> is one of the most complete and correct documentation there is. 
So if you want some guidelines, inspire yourself with this API.</p>

<h3 id="structure-and-accuracy">Structure and accuracy</h3>
<p>When documenting your application, your accuracy has to be 100% correct and understandable. 
The structure of your API is the representation of your application, so it better be good.</p>

<h3 id="cross-cutting-concerns">Cross-cutting concerns</h3>
<p>Andy put forward to document cross-cutting concerns on a general documentation level, avoiding repeating yourself in every single documented API call.
Concerns who made it to the top are:</p>

<ul>
  <li>Rate limiting</li>
  <li>Authentication and authorisation</li>
</ul>

<h4 id="and-http-verbscodes-patch-vs-put">And HTTP verbs/codes (PATCH VS PUT)</h4>
<p>To be RESTfull, you’ll have to follow the guidelines in having a correct API design. 
This <a href="https://upload.wikimedia.org/wikipedia/commons/8/88/Http-headers-status.png">picture</a> shows you how and when to use the correct verbs and HTTP codes</p>

<h3 id="main-questions-if-you-are-working-with-resources">3 main questions if you are working with resources</h3>
<ul>
  <li>What do they represent?</li>
  <li>What kind of input do they accept?</li>
  <li>What output do they produce?</li>
</ul>

<p>Last but not least: do not document uri’s!</p>

<h2 id="questions">Questions</h2>

<h3 id="will-constraints-be-officially-added-in-future-releases">Will constraints be officially added in future releases?</h3>
<p>The constraints snippets won’t be added in the future.
This is because Andy wants to give the developers the choice of what they want to implement.</p>

<h2 id="conclusion">Conclusion</h2>
<p>Since Spring REST Docs is so effective in bringing documentation to the fun part of development I highly recommend to use this in your future Spring applications. 
Not only you will be smiling when the API guide is being generated but the Frontend developers will get a more understandable view of the backend.</p>

<h2 id="sources">Sources</h2>
<ul>
  <li><a href="https://twitter.com/ankinson">@ankinson</a></li>
  <li><a href="http://docs.spring.io/spring-restdocs/docs/1.0.x/reference/html5/">Spring REST Docs</a></li>
  <li><a href="https://developer.github.com/v3/">GitHub API</a></li>
  <li><a href="https://upload.wikimedia.org/wikipedia/commons/8/88/Http-headers-status.png">Verbs &amp; HTTP codes</a></li>
  <li><a href="http://asciidoctor.org/docs/user-manual/#introduction-to-asciidoctor">Asciidoctor manual</a></li>
  <li><a href="https://github.com/spring-projects/spring-restdocs/tree/master/samples/rest-notes-slate">Slate example</a></li>
</ul>


    </article>
    <hr />
    
                
        
        
            <blockquote>
                <p>Kevin Van Houtte is a Software Engineer at Ordina Belgium. Passionate in the Spring ecosystem and Angular framework Kevin is eager to discover new and efficient ways to solve problems. He enjoys a good challenge and is interested in cutting edge technologies. Currently he works on a project with Microservices, Spring and Angular/TypeScript.</p>

            </blockquote>
        
    
    
        <br /><br />
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    
</div>

        </div>
    </div>
    <!-- Main content ends -->
</div>
<!-- Footer Starts -->
<footer class="footer">
    <!-- Container -->
    <div class="container">
        <!-- Foot Starts -->
        <div class="foot">
            <!-- Container -->
            <div class="container">
                <div class="row">
                    <div class="col-md-4 col-sm-6">
                        <!-- Foot Item -->
                        <div class="foot-item">
                            <!-- Heading -->
                            <h5 class="bold"><i class="fa fa-user"></i>&nbsp;&nbsp;Disclaimer</h5>

                            <p>Opinions expressed on this blog reflect the writer’s views and not the position of
                                Ordina.</p>

                            <div class="brand-bg">
                                <a target="_blank" href="https://www.facebook.com/lifeatordinabe" class="facebook"><i
                                        class="fa fa-facebook circle-3"></i></a>
                                <a target="_blank" href="https://twitter.com/lifeatordinabe"
                                   class="twitter"><i
                                        class="fa fa-twitter circle-3"></i></a>
                                <a target="_blank" href="https://www.linkedin.com/company/ordina-belgium"
                                   class="linkedin"><i
                                        class="fa fa-linkedin circle-3"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6">
                        <!-- Foot Item -->
                        <div class="foot-item">
                            <!-- Heading -->
                            <h5 class="bold"><i class="fa fa-comments"></i>&nbsp;&nbsp;Recent Posts</h5>
                            <!-- Foot Item Content -->
                            <div class="foot-item-content">
                                <ul class="list-unstyled">
                                    
                                    <li>
                                        <span>30 Jun 2016</span> &raquo;
                                        <a href="/conference/2016/06/30/SpringIO16-Spring-Rest-Docs.html">
                                            Spring I/O 16: Test-driven documentation with Spring REST Docs</a>
                                    </li>
                                    
                                    <li>
                                        <span>20 Jun 2016</span> &raquo;
                                        <a href="/conference/2016/06/20/whats-new-in-docker-112.html">
                                            DockerCon 2016 - What is new in Docker 1.12</a>
                                    </li>
                                    
                                    <li>
                                        <span>24 May 2016</span> &raquo;
                                        <a href="/conference/2016/05/24/SpringIO16-Spring-Rest-Docs.html">
                                            Spring I/O 16: Test-driven documentation with Spring REST Docs</a>
                                    </li>
                                    
                                    <li>
                                        <span>13 May 2016</span> &raquo;
                                        <a href="/conference/2016/05/13/JS-Conf-Budapest-day-2.html">
                                            JS Conf Budapest Day 2</a>
                                    </li>
                                    
                                    <li>
                                        <span>12 May 2016</span> &raquo;
                                        <a href="/conference/2016/05/12/JS-Conf-Budapest-day-1.html">
                                            JS Conf Budapest Day 1</a>
                                    </li>
                                    
                                    <li>
                                        <span>01 May 2016</span> &raquo;
                                        <a href="/microservices/2016/05/01/Using-JWT-Tokens-for-State-Transfer.html">
                                            Using JWT for state transfer</a>
                                    </li>
                                    
                                    <li>
                                        <span>25 Apr 2016</span> &raquo;
                                        <a href="/angularjs-typescript/2016/04/25/component-based-application-architecture-with-angularjs-and-typescript.html">
                                            Component-based application architecture with AngularJS and Typescript</a>
                                    </li>
                                    
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6">
                        <!-- Foot Item -->
                        <div class="foot-item">
                            <!-- Heading -->
                            <h5 class="bold"><i class="fa fa-building-o"></i>&nbsp;&nbsp;Contact Us</h5>
                            <!-- Foot Item Content -->
                            <div class="foot-item-content address">
                                <!-- Heading -->
                                <h6 class="bold"><i class="fa fa-home"></i>&nbsp;&nbsp;Ordina Belgium</h6>
                                <!-- Paragraph -->
                                <p class="add">
                                    Blarenberglaan 3B,<br/>
                                    Mechelen 2800, Belgium.</p>

                                <p class="tel"><i class="fa fa-phone"></i> Tel : + (32) - 15 29 58 58<br/>
                                    <i class="fa fa-envelope"></i> Mail : <a href="#">info@ordina.be</a><br/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Foot Ends -->
        <!-- Footer Content -->
        <p class="pull-left">Copyright &copy; 2016 - <a href="#">Ordina JWorks</a></p>
        <ul class="list-inline pull-right">
            <!-- List -->
            <li><a href="/">Home</a>
            <li><a href="/about/">About</a></li>
            <li><a href="/contact/">Contact</a></li>
        </ul>
        <!-- Clearfix -->
        <div class="clearfix"></div>
    </div>
</footer>
<!-- Footer Ends -->

<!-- Outer Ends -->

<!-- Scroll to top -->
<span class="totop"><a href="#"><i class="fa fa-angle-up bg-color"></i></a></span>

<script src="/js/jquery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/placeholders.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/respond.min.js"></script>
<script src="/js/html5shiv.js"></script>
<script src="/js/main.js"></script>

<script src="/js/imagesloaded.min.js"></script>
<script src="/js/masonry.js"></script>

<!-- Javascript for this page -->
<script>
    // Initialize Masonry
    var $box = $('.blog-masonry').masonry();
    // Layout Masonry again after all images have loaded
    $box.imagesLoaded(function () {
        $box.masonry();
    });
</script>

<!-- Custom JS. Type your JS code in custom.js file -->
<script src="/js/custom.js"></script>

<!-- Disqus -->

    <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = "https://ordina-jworks.github.io/conference/2016/05/24/SpringIO16-Spring-Rest-Docs.html";
            this.page.identifier = "/conference/2016/05/24/SpringIO16-Spring-Rest-Docs.html";
            this.page.title = "Spring I/O 16: Test-driven documentation with Spring REST Docs";
        };
    </script>
    <script src="//ordina-jworks.disqus.com/embed.js" async></script>


<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>
